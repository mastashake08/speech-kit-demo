(function(e){function t(t){for(var o,a,r=t[0],c=t[1],d=t[2],l=0,u=[];l<r.length;l++)a=r[l],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&u.push(s[a][0]),s[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);h&&h(t);while(u.length)u.shift()();return n.push.apply(n,d||[]),i()}function i(){for(var e,t=0;t<n.length;t++){for(var i=n[t],o=!0,r=1;r<i.length;r++){var c=i[r];0!==s[c]&&(o=!1)}o&&(n.splice(t--,1),e=a(a.s=i[0]))}return e}var o={},s={app:0},n=[];function a(t){if(o[t])return o[t].exports;var i=o[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=o,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(i,o,function(t){return e[t]}.bind(null,o));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/speech-kit-demo/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var d=0;d<r.length;d++)t(r[d]);var h=c;n.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"56d7":function(e,t,i){"use strict";i.r(t);var o=i("2b0e"),s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("img",{attrs:{alt:"SpeechKit logo",src:"https://github.com/mastashake08/speech-kit/blob/main/cover.png?raw=true",width:"100%",height:"500"}}),t("HelloWorld",{attrs:{msg:"SpeechKit Demo"}})],1)},n=[],a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"hello"},[t("h1",[e._v(e._s(e.msg))]),e._m(0),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.voiceText,expression:"voiceText"}],domProps:{value:e.voiceText},on:{change:e.generateSSML,input:function(t){t.target.composing||(e.voiceText=t.target.value)}}}),e._v(" "),t("p",[t("span",[t("p",[e._v(e._s(e.voiceSSML))])])]),t("ul",[t("select",{attrs:{name:"voices",id:"voice-select"},domProps:{value:e.selectedIndex},on:{change:function(t){return e.setVoice(t)}}},[t("option",{attrs:{disabled:"",value:"-1"}},[e._v("Select Voice")]),e._l(e.voices,(function(i,o){return t("option",{key:o,domProps:{value:o}},[e._v(e._s(i.name)+" - "+e._s(i.lang))])}))],2)]),t("ul",[t("button",{on:{click:e.share}},[e._v("Share")]),e.isPlaying?t("button",{on:{click:e.shutup}},[e._v("Shut Up")]):t("button",{on:{click:e.speak}},[e._v("Speak")]),e.isListen?t("button",{on:{click:e.stopListen}},[e._v("Stop Listen")]):t("button",{on:{click:e.listen}},[e._v("Listen")]),t("button",{on:{click:e.startStreaming}},[e._v("Save Audio File")])])])},r=[function(){var e=this,t=e._self._c;return t("p",[e._v(" Simple demo to demonstrate the Web Speech API using the "),t("a",{attrs:{href:"https://github.com/@mastashake08/speech-kit",target:"_blank",rel:"noopener"}},[e._v("SpeechKit npm package")]),e._v("! ")])}],c=(i("14d9"),i("43e4")),d={name:"HelloWorld",props:{msg:String},mounted(){this.mediaStream_=new MediaStream,this.sk=new c["a"]({continuous:!0,rate:.85}),setTimeout(()=>{this.voices=this.sk.getVoices(),this.selectedVoice=this.voices[0]},"1000"),this.generateSSML(),document.addEventListener("onspeechkitresult",e=>this.getText(e)),document.addEventListener("onspeechkitspeechend",()=>this.addPeriod()),document.addEventListener("onspeechkitsoundend",()=>this.addPeriod()),document.addEventListener("onspeechkitvoiceschanged",()=>{this.sk.getVoices()})},data(){return{voiceText:"Welcome to the SpeechKit demo hosted on Github Pages! To get started you can select a voice from the dropdown and click the speak button to hear these instructions. You can type text or hit the listen button to enable speech recognition and change the text in the textarea.\n\nIf you click the Generate SSML button, then your text will be converted to SSML format to export in other voice-powered applications such as Amazon Alexa Polly and Twilio.\n\nIf you select a portion of a sentence you want to pause on before speaking and then click the Add Break button, your text will be converted to SSML with a 200ms break before said sentence. More features are coming to edit SSML data in the future, for now, HAVE FUN!",sk:{},isListen:!1,voices:[],selectedVoice:{},selectedIndex:-1,isPlaying:!1,voiceSSML:null,oldVoiceSSML:"",SSMLTagIndicies:[],mediaRecorder:{},mediaStream_:{},chunks:[]}},watch:{voiceText:function(){this.generateSSML()}},methods:{setVoice(e){this.selectedVoice=this.voices[e.target.value],this.selectedIndex=e.target.value,this.sk.setSpeechVoice(this.selectedVoice)},share(){try{navigator.canShare?navigator.share({text:this.voiceSSML}):this.clipBoard(this.voiceSSML)}catch(e){this.clipBoard(this.voiceSSML)}},async clipBoard(e,t="text/plain"){const i=new Blob([e],{type:t}),o=[new window.ClipboardItem({[t]:i})];await navigator.clipboard.write(o),alert("SSML copied to clipboard!")},speak(){this.sk.speak(this.voiceSSML,this.selectedVoice),this.isPlaying=!this.isPlaying},shutup(){this.sk.shutup(),this.isPlaying=!this.isPlaying},listen(){this.sk.listen(),this.isListen=!this.isListen},stopListen(){this.sk.stopListen(),this.isListen=!this.isListen},getText(e){this.voiceText="";const t=e.detail.results;for(let i=0;i<t.length;++i)this.voiceText+=` ${t[i][0].transcript.charAt(1).toUpperCase()}${t[i][0].transcript.slice(2)}`,this.addPeriod()},generateSSML(){const e=this.sk.createSSML(this.voiceText);null!==this.voiceSSML?this.oldVoiceSSML=this.voiceSSML:this.voiceSSML=this.oldVoiceSSML=e,this.voiceSSML=e},addPeriod(){"."!==this.voiceText.charAt(this.voiceText.length-1)&&(this.voiceText=this.voiceText+".")},addBreak(){let e=this.getCursorSelection();this.voiceSSML=this.sk.addBreakSSML(this.voiceText,e.toString(),e.focusOffset)},addEmphasis(){let e=this.getCursorSelection();this.voiceSSML=this.sk.addEmphasisSSML(this.voiceText,e.toString(),e.focusOffset),this.oldVoiceSSML=this.voiceSSML},getCursorSelection(){let e=window.getSelection();return e.modify("move","backward","sentence"),e.modify("extend","forward","sentence"),e},saveBlob(){const e=document.createElement("a");document.body.appendChild(e),e.style.display="none";const t=new Blob(this.chunks),i=Date.now()+".webm",o=URL.createObjectURL(t);e.href=o,e.download=i,e.click()},async startStreaming(){const e=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0});this.mediaRecorder=new MediaRecorder(e),this.isPlaying=!this.isPlaying;const t=await e.getAudioTracks()[0];document.addEventListener("onspeechkitutterenceend",()=>{this.mediaRecorder.stop()}),this.mediaStream_.addTrack(t),this.mediaRecorder.ondataavailable=e=>{e.data.size>0&&this.chunks.push(e.data)},this.mediaRecorder.onstop=()=>{this.sk.shutup(),t.stop(),this.mediaStream_.getAudioTracks()[0].stop(),this.mediaStream_.removeTrack(t),this.saveBlob()},this.mediaRecorder.start(),this.speak()}}},h=d,l=(i("b65d"),i("2877")),u=Object(l["a"])(h,a,r,!1,null,"a8943f54",null),p=u.exports,v={name:"App",components:{HelloWorld:p}},S=v,m=(i("f5ef"),Object(l["a"])(S,s,n,!1,null,null,null)),f=m.exports;o["a"].config.productionTip=!1,new o["a"]({render:e=>e(f)}).$mount("#app")},b296:function(e,t,i){},b65d:function(e,t,i){"use strict";i("c466")},c466:function(e,t,i){},f5ef:function(e,t,i){"use strict";i("b296")}});
//# sourceMappingURL=app.158fe859.js.map